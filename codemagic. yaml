# workflows define a series of steps to build, test, and deploy your app.
workflows:
  flutter-build:
    name: Flutter Build # This name appears in the CodeMagic UI.
    max_build_duration: 60 # Set max build time in minutes.

    # The type of machine to run the build on.
    instance_type: mac_mini_m1

    # Environment variables for the build.
    environment:
      flutter: stable
      java: 17
    
    # Scripts to run in order.
    scripts:
      - name: Flutter version
        script: |
          flutter --version
      - name: Get dependencies
        script: |
          flutter pub get
      - name: Build Android App Bundle
        script: |
          flutter build appbundle --release

    # The files to save after a successful build.
    artifacts:
      - build/app/outputs/bundle/**/*.aab
